<!DOCTYPE html>
<html>

<head>
  <title>WebSocket Client</title>
</head>

<body>
  <div id="messages"></div>
  <input type="text" id="messageInput" placeholder="Enter a message">
  <button id="sendButton">Send</button>

  <script>
    // Get references to HTML elements
    const messagesElement = document.getElementById("messages");
    const messageInput = document.getElementById("messageInput");
    const sendButton = document.getElementById("sendButton");

    // Create a WebSocket connection to the server
    const socket = new WebSocket("ws://localhost:3333/ws"); // Replace with your server's WebSocket URL

    // Event handler for when the WebSocket connection is opened
    socket.addEventListener("open", (event) => {
      messagesElement.innerHTML += "<p>Connected to the WebSocket server</p>";
    });

    // Event handler for incoming messages from the server
    socket.addEventListener("message", (event) => {
      messagesElement.innerHTML += `<p>Server says: ${event.data}</p>`;
    });

    // Event handler for when the WebSocket connection is closed
    socket.addEventListener("close", (event) => {
      if (event.wasClean) {
        messagesElement.innerHTML += `<p>Connection closed cleanly, code=${event.code}, reason=${event.reason}</p>`;
      } else {
        messagesElement.innerHTML += "<p>Connection abruptly closed</p>";
      }
    });

    // Event handler for WebSocket errors
    socket.addEventListener("error", (error) => {
      messagesElement.innerHTML += `<p>WebSocket error: ${error.message}</p>`;
    });

    // Event handler for sending a message to the server
    sendButton.addEventListener("click", () => {
      const message = messageInput.value;
      socket.send(message);
      messagesElement.innerHTML += `<p>You say: ${message}</p>`;
      messageInput.value = "";
    });
  </script>
</body>

</html>
